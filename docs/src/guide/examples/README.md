# Examples

This page provides example configurations to assist with figure generation.
These examples are designed for use with the participant workflow. Additional figures
can be generated by modifying configurations as needed.

## Anatomical

The configuration below generates two views for anatomical T1-weighted (T1w) images.

```yaml
queries:
  t1w: &t1w datatype == 'anat' & suffix == 'T1w' & ext == '.nii.gz'

figures:
  anat:
    queries:
      - *t1w
    views:
      three_view:
        figure: anatThreeView
      slice_video:
        axis: 2
```

> [!NOTE]
> * `&t1w` defines a reusable YAML variable that can be referenced with `*t1w`
> * The query identifies all T1w images in compressed NIfTI format - it is important to ensure queries only filters only those volumes to visualize
> * Keys under views correspond to keyword arguments for view-generating functions

## Diffusion

The configuration below generates views for diffusion weighted (DWI) images in the same
space as T1w images (for overlays). It also assumes there are 3D non-diffusion weighted
(B0) images.

```yaml
queries:
  dwi: &dwi datatype == 'dwi' & space == 'T1w' & res == 'dwi' & desc == 'preproc' & suffix == 'dwi' & ext == 'nii.gz'
  dwi_mask: &dwi_mask datatype == 'dwi' & space == 'T1w' & res == 'dwi' & desc == 'preproc' & suffix == 'mask' & ext == 'nii.gz'
  b0: &b0 datatype == 'dwi' & space == 'T1w' & desc == 'avg' & suffix == 'b0' & ext == 'nii.gz'
  t1w: &t1w datatype == 'anat' & run == 1 & suffix == 'T1w' & ext == 'nii.gz'
join_entities:
  default: &default ["sub", "ses", "run"]

figures:
  dwi:
    queries:
      - *dwi
    views:
      three_view_video:

  dwi_mask:
    queries:
      - *dwi
      - *dwi_mask
    join_entities: *default
    views:
      three_view_video:
        figure: "mask"

  registration:
    queries:
      - *b0
      - *t1w
    join_entities: ["sub", "ses"]
    views:
      three_view:
        overlay_cmap: "hot"
        figure: "registration"
```

> [!NOTE]
> * `join_entities` define which BIDS entities queries should match
